# https://aka.ms/yaml
variables:
  - group: Keys
trigger: 
  paths:
    exclude:
      - .github/FUNDING.yml
      - src/Modules/Readme.md
      - src/Modules/AutoCommit/Readme.md
      - src/Modules/CloneMemberValue/Readme.md
      - src/Modules/HideToolBar/Readme.md
      - src/Modules/MasterDetail/Readme.md
      - src/Modules/ModelMapper/Readme.md
      - src/Modules/ModelViewInheritance/Readme.md
      - src/Modules/ProgressBarViewItem/Readme.md
      - src/Modules/Reactive/Readme.md
      - src/Modules/SuppressConfirmation/Readme.md
      - src/Modules/ViewEditMode/Readme.md
      - README.md
  branches:
    include:
      - lab
pool:
  vmImage: windows-2019
steps:
- checkout: self
  clean: true
- task: PowerShell@2
  displayName: Build
  inputs:
    pwsh: true
    targetType: filePath
    filePath: .\tools\build\lab-pipeline.ps1 
    arguments: $(Build.SourceBranchName) $(System.DefaultworkingDirectory) $(GitHubUserName) $(GitHubPass) $(DXApiFeed) $(build.artifactstagingdirectory) $(AzureToken)
- task: CopyFiles@2
  inputs:
    SourceFolder: '.\bin'
    Contents: '**'
    TargetFolder: '$(Build.ArtifactStagingDirectory)'
- task: PublishBuildArtifacts@1
  inputs:
    PathtoPublish: '$(Build.ArtifactStagingDirectory)'
    ArtifactName: 'drop'
    publishLocation: 'Container'